<!-- Sidebar -->

<div class="sidebar text-white d-flex flex-column p-3" style="width: 220px; height: 100vh; position: fixed;">

 <h4 class="mb-4">

   <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-list" viewBox="0 0 16 16">

     <path fill-rule="evenodd" d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5"/>

   </svg> Menu

 </h4>


 

 <!-- User buttons -->

 <button class="btn btn-outline-light mb-3" (click)="showAddUserForm('manager')">Add Manager</button>

 <button class="btn btn-outline-light mb-3" (click)="showAddUserForm('staff')">Add Staff</button>


 

 <!-- Outlet buttons -->

 <button class="btn btn-outline-light mb-3" (click)="showAddOutletForm()">Add Outlet</button>

 <button class="btn btn-outline-light mb-3" (click)="toggleOutletList()">View Outlets</button>


 

 <!-- View Reports -->

<button class="btn btn-outline-light mb-3" (click)="showReportSection()">View Reports</button>



 

 <!-- Logout -->

 <button class="btn btn-danger mt-auto" (click)="logout()">Logout</button>

</div>


 

<!-- Main Content -->

<div class="main-content" style="margin-left: 240px; padding: 20px; overflow-x: hidden;">

 <header class="navbar navbar-expand-lg custom-navbar">

   <div class="container-fluid px-0">

     <div class="navbar-left">

       <h1 class="navbar-brand m-0 text-white">Admin Dashboard</h1>

     </div>

     <div class="navbar-right ms-auto position-relative" (click)="toggleDropdown($event)" style="cursor: pointer;">

       <img src="assets/admin.png" alt="Admin" class="profile-icon rounded-circle">

     </div>

   </div>

 </header>


 

 <!-- Search bar -->

 <div class="search-container mb-3" *ngIf="showUsers">

   <input type="text" [(ngModel)]="searchQuery" placeholder="Search users..." class="form-control mb-2" (input)="onSearch()" />

 </div>


 

 <!-- User cards -->

 <div *ngIf="showUsers" class="user-cards-container row mt-4">

   <div class="col-md-4 mb-4" *ngFor="let user of filteredUsers">

     <div class="card user-card h-100 shadow-sm">

       <div class="card-body text-center">

         <img [src]="user.img" alt="{{ user.username }}" class="rounded-circle mb-3" width="80" height="80">

         <h5 class="card-title">{{ user.username }}</h5>

         <p class="card-text text-muted">{{ user.email }}</p>

         <span class="badge custom-role-badge text-capitalize">{{ user.role }}</span>

         <div class="mt-3">

           <button class="btn btn-sm btn-outline-primary me-2" (click)="editUser(user)">Edit</button>

           <button *ngIf="user.role.toLowerCase() !== 'admin'" class="btn btn-sm btn-outline-danger" (click)="confirmDelete(user._id)">Delete</button>

         </div>

       </div>

     </div>

   </div>

 </div>


 

 <!-- Add/Edit User Form -->

 <div *ngIf="showUserForm" class="mt-4">

   <form [formGroup]="userForm" (ngSubmit)="onSubmitUser()">

     <div class="mb-3" style="margin-top: 100px;">

       <label class="form-label">Username</label>

       <input type="text" class="form-control" formControlName="username" />

     </div>

     <div class="mb-3">

       <label class="form-label">Email</label>

       <input type="email" class="form-control" formControlName="email" />

     </div>

     <div class="mb-3">

       <label class="form-label">Role</label>

       <input type="text" class="form-control text-capitalize" formControlName="role" readonly />

     </div>

     <div class="mb-3">

       <label class="form-label">Password</label>

       <input type="password" class="form-control" formControlName="password" />

     </div>

     <button type="submit" class="btn btn-primary me-2">Save</button>

     <button type="button" class="btn btn-secondary" (click)="cancelForm()">Cancel</button>

   </form>

 </div>


 

 <!-- Outlet Form -->

 <div *ngIf="showOutletForm" class="mt-4">

   <form [formGroup]="outletForm" (ngSubmit)="onSubmitOutlet()">

     <div class="mb-3" style="margin-top: 100px;">

       <label class="form-label">Outlet Name</label>

       <input type="text" class="form-control" formControlName="name" />

     </div>

     <div class="mb-3">

       <label class="form-label">Location</label>

       <input type="text" class="form-control" formControlName="location" />

     </div>

     <div class="mb-3">

       <label class="form-label">Select Manager</label>

       <select class="form-control" formControlName="manager">

         <option *ngFor="let manager of managerList" [value]="manager._id">{{ manager.username }}</option>

       </select>

     </div>

     <div class="mb-3">

       <label class="form-label">Select Staff</label>

       <select class="form-control" formControlName="staff">

         <option *ngFor="let staff of staffList" [value]="staff._id">{{ staff.username }}</option>

       </select>

     </div>

     <button type="submit" class="btn btn-primary me-2">Save</button>

     <button type="button" class="btn btn-secondary" (click)="cancelForm()">Cancel</button>

   </form>

 </div>

<br><br>

 <!-- Outlet List -->

 <div *ngIf="showOutletList" class="mt-4">

   <h3>Outlets</h3>

   <div class="mb-3">

     <input type="text" [(ngModel)]="outletSearchQuery" placeholder="Search outlets..." class="form-control mb-2" (input)="onOutletSearch()" />

   </div>


 

   <div class="row">

     <div class="col-md-4 mb-3" *ngFor="let outlet of filteredOutlets">

       <div class="card h-100 shadow-sm">

         <div class="card-body">

           <h5 class="card-title">{{ outlet.name }}</h5>

           <p class="card-text">Location: {{ outlet.location }}</p>

           <p class="card-text">Manager: {{ outlet.managerName || 'N/A' }}</p>

           <p class="card-text">Staff: {{ outlet.staffName || 'N/A' }}</p>

           <button class="btn btn-sm btn-outline-primary me-2" (click)="editOutlet(outlet)">Edit</button>

         </div>

       </div>

     </div>

   </div>

 </div>


 

 <!-- Report Section -->

<div *ngIf="showReports" class="mt-4" >

  <h3 >Stock Reports</h3>


 

  <!-- <div class="mb-3" >

    <input type="text" [(ngModel)]="reportSearchQuery" placeholder="Search reports..." class="form-control mb-2" (input)="onReportSearch()" />

  </div> -->


 

  <div class="list-group mb-3">

    <a *ngFor="let report of reportFiles" id="reportt" href="#" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center" (click)="viewReport()">

      {{ report }}</a>

      <button class="btn btn-sm btn-outline-success " id="download" (click)="downloadReportHTML()">Download</button>

   

  </div>


 

  <div *ngIf="selectedReportContent">

    <h5>Preview</h5>

    <div class="border p-3 bg-light" [innerHTML]="selectedReportContent" style="max-height: 400px; overflow-y: auto;"></div>

  </div>

</div>


 

</div>

